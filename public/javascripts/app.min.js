function setLocalStorageData(a){"undefined"!=typeof Storage&&localStorage.setItem(window.location.href.replace(/[^A-Za-z0-9]/g,""),a)}function checkLocalStorageData(){if("undefined"!=typeof Storage){var a=localStorage.getItem(window.location.href.replace(/[^A-Za-z0-9]/g,""));return null!=a&&0!=a.length&&0!=$(".easypoll-ratings").length&&a}return!1}function drawChart(){var a=google.visualization.arrayToDataTable(chartData),b=new google.visualization.DataView(a);b.setColumns([0,1,2,3]);var c={title:"",width:chartWidth,height:chartHeight,bar:{groupWidth:"95%"},legend:{position:"none"}};if(0!=$("#easypoll-chart").length){new google.visualization.BarChart(document.getElementById("easypoll-chart")).draw(b,c)}}function drawBarChart(a,b){google.charts.load("current",{packages:["corechart"]});var c=String(a).split(",");if(c.length>0){chartData=[[languageArray[1],languageArray[2],{role:"style"},{role:"annotation"}]];for(var d=c.length-1;d>=0;d--){var e=.5,f="";d<5&&(e=1-d/10),""!=c[d]?(f=String((100*Number(c[d])/b).toFixed(0))+"%",chartData[chartData.length]=[String(d+1),Number(c[d]),"color:"+colorsArray[0]+"; stroke-color: white; fill-opacity:"+e,f]):chartData[chartData.length]=[String(d+1),0,"color:"+colorsArray[0]+"; stroke-color: white; fill-opacity:"+e,f]}google.charts.setOnLoadCallback(drawChart)}}function drawPreviousResponse(a,b){if(0!=$(b).length&&void 0!=$(b).attr("data-length")){$(b).css("display","none");for(var c="",d=0;d<Number($(b).attr("data-length"));d++)c+=a>=d+1?'<div class="easypoll-radio radio-inline-true"></div>':'<div class="easypoll-radio radio-inline-false"></div>';""!=c&&$(b).after('<div class="alert alert-success">'+languageArray[0]+": "+a+"</div>"+c)}}var languageArray=["Your rating","Rating","Number of ratings","Completed"],colorsArray=["#ffcc33"],chartData=[],chartWidth=400,chartHeight=125;$(document).ready(function(){var a=checkLocalStorageData(),b=!1,c=languageArray[3];0==a?(void 0!==$("#ratings-form-submit")&&void 0!==$("#ratings-form")&&($("#ratings-form-submit").css("display","block"),$("#ratings-form").css("display","block")),void 0!==$("#ratings-form")&&$("#ratings-form").submit(function(a){0==b&&setLocalStorageData(c)}),$(".easypoll-form").find(".radio").click(function(a){void 0!==$("input[name=rating]:checked").val()&&(b=!0,c=String($("input[name=rating]:checked").val()),setLocalStorageData(c),void 0!==$("#ratings-form-submit")&&$("#ratings-form-submit").attr("disabled",!1),void 0!==$("#ratings-form")&&$("#ratings-form").submit())})):0==isNaN(a)&&drawPreviousResponse(a,$(".easypoll-form")),0!=$("#easypoll-chart").length&&void 0!=$("#easypoll-chart").attr("data-ratings")&&void 0!=$("#easypoll-chart").attr("data-total")&&drawBarChart($("#easypoll-chart").attr("data-ratings"),$("#easypoll-chart").attr("data-total"))});